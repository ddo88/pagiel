var dropbox,current,currentModal;function showModal(e,t,o){(currentModal=$(e)).dialog({title:t,height:o||500,width:600,modal:!0})}function closeModal(e){$(e).dialog("close")}function VM(){var t=this;return t.files=ko.observableArray(),(t=sortableList(t,"files")).currentFile=ko.observable(),t.enableNew=ko.observable(!1),t.enableEdit=ko.observable(!1),t.enableLyrics=ko.observable(!1),t.enableChords=ko.observable(!1),t.selectedFile=function(e){t.enableEdit(!0),t.currentFile(e),showModal("#edit",t.currentFile().name())},t.goToList=function(){window.location.href="/list"},t.clearSelected=function(){currentModal.dialog("close"),t.enableEdit(!1),t.enableChords(!1),t.enableLyrics(!1),t.currentFile(void 0)},t.newItem=function(){t.currentFile(new Song({Name:"",Lyrics:"",Chords:""},t)),showModal("#new","new",600)},t.init=function(){t.files([]),get("/api/songs").done(function(e){AsyncFor(e,function(e){t.files.push(new Song(e,t))})})},t.init(),t}Song.prototype.getIcon=function(){return this.chords()?"fa fa-check text-success":"fa fa-exclamation-triangle text-warning"},Song.prototype.showLetra=function(){this.parent.currentFile(this),this.parent.enableLyrics(!0),showModal("#lyrics",this.name(),500)},Song.prototype.showNotas=function(){this.parent.currentFile(this),this.parent.enableChords(!0),showModal("#chords",this.name(),500)},Song.prototype.editSong=function(){this.parent.currentFile(this),this.parent.enableEdit(!0),showModal("#edit",this.name(),600)},Song.prototype.addToList=function(){postItem("/api/lists/current/AddSong",{id:this.id()}).done(function(e){alert("ingresado")})},Song.prototype.Save=function(){postItem("/api/songs",this.toItem()).done(function(e){$("#new").dialog("close")})},Song.prototype.Update=function(){updateItem("/api/songs",this.toItem()).done(function(e){$("#edit").dialog("close")})},Song.prototype.Cancel=function(){this.parent.clearSelected()},$(function(){ko.applyBindings(new VM)});